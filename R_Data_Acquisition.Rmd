---
title: "Data Acquisition"
author: "Stuart Hertzog"
date: "May 16, 2018"
output: html_document
---

**Data acquisition tools are built into `R`**, which makes it extremely easy to access large pools of publicly-available statistical data pools that have been assembled by governments, research centres, corporations, business associations, non-profit organisations, and individuals.

Data can be harvested from:

* **Plain text and delimited files** (`.txt`, `.csv`, `.tsv`)
* **Microsoft Word and Excel files** (`.doc`, `.docx`, `.xls`, `.xlsx`)
* **Data contained within databases** (SQLite, MySQL, Microsoft Access)
* **Data in statistical software** (SAS, SPSS, NCSS, Octave)
The data sources can be located:

  * **in `R` and `R packages`**
  * **on your computer storage**
  * **on a local or linked network**, or
  * **anywhere on the global Internet**

## Built-In `R` Datasets

**An `R` installation includes many built-in datasets**. These are contained in the package `datasets` and are available at all times. They can be listed with the command:

```{r, eval = FALSE}
data()
```

Specific datasets can be loaded using the same `data()` function and its structure inspected using `head()`:

```{r}
data("USArrests")
head(USArrests)
```

## Datasets In Packages

**Many packages also contain their own datasets**. A package must be installed and loaded before its dataset is available. You can see a comprehensive listing of the datasets included in all installed packages with the command:

```{r, eval = FALSE}
data(package = .packages(all.available = TRUE))
```

**Packages will be listed in alphabetical order** followed by the datasets they contain. You will be surprised to see how many datasets are available for your use! Due to changes in dataset organisation in recent `R` versions, you may see in Console:

```
Warning messages:
1: In data(package = .packages(all.available = TRUE)) :
  datasets have been moved from package 'base' to package 'datasets'
2: In data(package = .packages(all.available = TRUE)) :
  datasets have been moved from package 'stats' to package 'datasets'
```

**To import and inspect a dataset contained in a package**:

```{r}
data(diamonds, package='ggplot2')
head(diamonds)
```

## Importing Delimited Data

**[Delimiter-separated](https://en.wikipedia.org/wiki/Delimiter-separated_values) data files are plain text files** in which the data is arranged in **rows**, each row **containing data items separated by a delimiter** and the row **ended by a `<NEWLINE>`**. The first row of data is usually the column headings.

**These are the most basic type of dataset** as being plain text, they are cross-platform and can be opened by any text editor. Most database and spreadsheet programs are able to read or save data in a delimited format.

**The most common data delimiters are**:

* **Comma-Separated Values** (CSV -- `.csv` file extension)
* **Tab-Separated Values** (TSV -- `.tsv` file extension)
* **Any other ASCII character** (colon `:`, pipe `|`, etc.)
* **Designated ASCII [Control characters](https://en.wikipedia.org/wiki/Control_character#Data_structuring)**.

If the data items consist of multiple words or characters separated by punctuation or spaces, each data item must be contained within pairs of single `'<ITEM>'` or double `"<ITEM>"` quotes.

### Using `read.table`

**`read.table` is part of `R`'s built-in `utils` package**. It's the easiest way to import delimited data files, and **results in a [_data.frame_](R_Programming.html#dataframes)**.

Here are the first six lines of a `.csv` file containing **data from a [Fitbit tracker](https://www.fitbit.com/en-ca/charge2)**. It is called `fitbit.csv` and is **located in the `docs` directory of this project**:

```{r}
theFile <- "docs/fitbit.csv"
fitbit <- read.table(file=theFile, header=TRUE, sep=",")
head(fitbit)
```

**`read.table` has three arguments**:

* **The path and filename or URL** of the data file;
  * Path can be _absolute_ or _relative_ to the current _working directory_;
* **Whether the first line contains the column header labels**;
  * set to TRUE if _and only if_ the first row contains one fewer fields than the number of columns; and
* **The separator between data items**.
  * If not set, the default is `""` white space, meaning one or more spaces, tabs, newlines or carriage returns. This can be set to `\t` (_<TAB>_) or `;` (semicolon) as appropriate.

**Documentation of `read.table` can be viewed with**:

```{r}
?read.table
```

**Two important arguments are**:

* **`as.is`** -- the default behavior of `read.table`, **converts _character_ variables to _factors_**, while
* **`stringsAsFactors`** -- `TRUE` or `FALSE` **can be used to prevent this**, although `as.is` and `colClasses`, which sets the [_data type_](R_Programming.html#data-types) for each column, will override it (see the documentation).

#### Pre-set Wrappers

`read.table` has wrappers pre-set for different file delimiters:

Function | separator | decimal
---- | ---- | ----
read.table | empty| period 
read.csv | comma | period 
read.csv2 | / | comma 
read.delim | &bsol;t | period 
read.delim2 | &bsol;t | tab 

If you know the delimiter, using one of these is the easiest way to import those files.

#### Faster Alternatives

**`read.table` is slow to read large files into memory**. Two other packages provide function that are faster and better in that they do not automatically convert [_character data_](R_Programming.html#character-data-types) to _factors_:

* [`read.delim`](https://www.rdocumentation.org/packages/readr/versions/1.1.1/topics/read_delim) from the [`reader`](https://www.rdocumentation.org/packages/readr/versions/1.1.1) package by [Hadley Wickham](http://hadley.nz/), and
* [`fread`](https://www.rdocumentation.org/packages/data.table/versions/1.11.2/topics/fread) from the [`data.table`](https://www.rdocumentation.org/packages/data.table/versions/1.11.2) package by [Matt Dowle](https://www.linkedin.com/in/mattdowle).

## Importing Excel Data

## Importing JSON

## Data In R Binary Files

## Data From Databases

## Data from Web Sites

## From Other Software

<p class="bottom-navbar"><span class="bottom-navbar-contents"><span class="glyphicon glyphicon-arrow-left"> </span> [<span class="bottom-navbar-link">Part 2 - Fundamentals of R</span>](R_Programming.html)&nbsp;&nbsp; |&nbsp; [<span class="bottom-navbar-link">Learning Resources</span>](R_Learning_Resources.html)&nbsp; <span class="glyphicon glyphicon-arrow-right"></span></span></p>
